angular.module("ngSmoothSubmit",["ngCookies"]).provider("$smoothSubmit",function(){var a=false;this.appendCsrfCallback=function(b){if(_.isFunction(b)){a=b}};this.$get=["$rootScope","$q","$cookies","$filter",function(c,d,e,h){var g=function(i){var l=d.defer();var j={xhrFields:{withCredentials:true},success:function(n){c.$broadcast("$smoothSubmitSuccess",n);try{var m=JSON.parse(n);l.resolve(m)}catch(o){l.resolve(n)}},error:function(m){c.$broadcast("$smoothSubmitError",m);l.reject(m)}};_.merge(j,i);if(i.type==="POST"&&a){var k=e.getAll();a(i.data,k)}l.notify("$smoothSubmitSend");c.$broadcast("$smoothSubmitSend");$.ajax(j);return l.promise};var f=function(k,i,j){if((i instanceof Object)&&!(i instanceof File)&&!(i instanceof Blob)&&!(i instanceof Date)){for(key in i){if(i[key] instanceof Object){f(k,i[key],j+"["+key+"]")}else{if(i[key]===null||i[key]===undefined){i[key]=""}k.append(j+"["+key+"]",value)}}}else{if(i===null||i===undefined){i=""}else{if(i instanceof Date){i=h("date")(i,"yyyy-MM-dd HH:mm:ss","UTC")}}k.append(j,i)}};var b={};b.$post=function(k,l,j){var i={};i=_.merge(i,j);i.type="POST";i.url=k;i.cache=false;i.processData=false;i.contentType=false;var m;if(l instanceof FormData){i.data=l}else{m=new FormData();this.mergeFormData(m,l);i.data=m}return g(i)};b.$get=function(k,l,j){var i={};i=_.merge(i,j);i.type="GET";i.url=k;i.data=l;return g(i)};b.mergeFormData=function(j,i){angular.forEach(i,function(l,k){f(j,l,k)})};b.appendCsrfCallback=function(i){if(_.isFunction(i)){a=i}};return b}]});