angular.module("ngSmoothSubmit",["ngCookies"]).provider("$smoothSubmit",function(){var a=false;this.appendCsrfCallback=function(b){if(_.isFunction(b)){a=b}};this.$get=["$rootScope","$q","$cookies",function(c,d,e){var g=function(h){var k=d.defer();var i={xhrFields:{withCredentials:true},success:function(m){c.$broadcast("$smoothSubmitSuccess",m);try{var l=JSON.parse(m);k.resolve(l)}catch(n){k.resolve(m)}},error:function(l){c.$broadcast("$smoothSubmitError",l);k.reject(l)}};_.merge(i,h);if(h.type==="POST"&&a){var j=e.getAll();a(h.data,j)}k.notify("$smoothSubmitSend");c.$broadcast("$smoothSubmitSend");$.ajax(i);return k.promise};var f=function(j,h,i){if((h instanceof Object)&&!(h instanceof File)&&!(h instanceof Blob)){for(key in h){if(h[key] instanceof Object){f(j,h[key],i+"["+key+"]")}else{if(h[key]===null||h[key]===undefined){h[key]=""}j.append(i+"["+key+"]",h[key])}}}else{if(h===null||h===undefined){h=""}j.append(i,h)}};var b={};b.$post=function(j,k,i){var h={};h=_.merge(h,i);h.type="POST";h.url=j;h.cache=false;h.processData=false;h.contentType=false;var l;if(k instanceof FormData){h.data=k}else{l=new FormData();this.mergeFormData(l,k);h.data=l}return g(h)};b.$get=function(j,k,i){var h={};h=_.merge(h,i);h.type="GET";h.url=j;h.data=k;return g(h)};b.mergeFormData=function(i,h){angular.forEach(h,function(k,j){f(i,k,j)})};b.appendCsrfCallback=function(h){if(_.isFunction(h)){a=h}};return b}]});